<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linus Horn's Blog</title>
    <meta name="description" content="Exploring the intersections of technology, the elegance of mathematics, and the complex systems of geopolitics.">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=VT323&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-brand">Linus Horn's Blog</a>
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="/blogs">Blogs</a>
            </div>
        </div>
    </nav>

    <!-- Latest Posts Section -->
    <section id="latest" class="latest-posts">
        <div class="container">
            <h2 class="section-title">My Latest Posts</h2>
            <div id="latest-posts-container" class="posts-grid">
                <!-- Posts will be loaded dynamically -->
            </div>
            <div class="section-footer">
                <a href="/blogs" class="btn btn-outline">Explore The Archive</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Â© 2025 Linus Horn.</p>
            </div>
        </div>
    </footer>

    <script>
        // Load latest posts
        async function loadLatestPosts() {
            try {
                const response = await fetch('/api/posts/latest?limit=3');
                const data = await response.json();
                const container = document.getElementById('latest-posts-container');
                
                if (data.posts && data.posts.length > 0) {
                    container.innerHTML = data.posts.map(post => `
                        <div class="post-card">
                            <div class="post-card-header">
                                <h3><a href="/blog/${post.filename}">${post.title}</a></h3>
                                <div class="post-meta">
                                    <span class="post-author">By ${post.author}</span>
                                    <span class="post-date">${new Date(post.created_date).toLocaleDateString('en-US', { 
                                        year: 'numeric', 
                                        month: 'long', 
                                        day: 'numeric' 
                                    })}</span>
                                </div>
                            </div>
                            <div class="post-card-content">
                                ${post.description ? `<p>${post.description}</p>` : ''}
                                ${post.tags && post.tags.length > 0 ? `
                                    <div class="post-tags">
                                        ${post.tags.map(tag => `<a href="/tag/${tag}" class="tag">${tag}</a>`).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = `
                        <div class="no-posts">
                            <h3>No posts yet</h3>
                            <p>Check back soon for new content!</p>
                        </div>
                    `;
                }
                
                // Update posts count
                const postsCountEl = document.getElementById('posts-count');
                if (postsCountEl) {
                    const allPostsResponse = await fetch('/api/posts');
                    const allPostsData = await allPostsResponse.json();
                    postsCountEl.textContent = allPostsData.posts ? allPostsData.posts.length : '0';
                }
            } catch (error) {
                console.error('Error loading posts:', error);
                document.getElementById('latest-posts-container').innerHTML = `
                    <div class="error-message">
                        <h3>Unable to load posts</h3>
                        <p>Please try again later.</p>
                    </div>
                `;
            }
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Load content when page is ready
        document.addEventListener('DOMContentLoaded', loadLatestPosts);
    </script>
</body>
</html>
